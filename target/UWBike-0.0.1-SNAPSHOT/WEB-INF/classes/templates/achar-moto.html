<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trilateração da Moto</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>
<div th:replace="fragments/header :: headerFragment"></div>

<main class="funcBody">
    <h1>Calcular Posição da Moto</h1>
    <div class="info">
        <p>⚠️ Os valores de distância (d1, d2, d3) são coletados pelos sensores ESP32 e usados para localizar a moto no pátio.</p>
    </div>
    <div class="card" style="width: 400px;">
        <form th:action="@{/calcular}" method="post" class="form">
            <div class="field">
                <label for="motoId">ID da Moto</label>
                <input type="text" id="motoId" name="motoId" th:value="${motoId}" required>
            </div>

            <div class="field">
                <label for="patioId">ID do Pátio</label>
                <input type="text" id="patioId" name="patioId" th:value="${patioId}" required>
            </div>

            <div class="field">
                <label for="d1">Distância para Ancora 1 (d1)</label>
                <input type="text" step="0.01" id="d1" name="d1" th:value="${d1}" required>
            </div>

            <div class="field">
                <label for="d2">Distância para Ancora 2 (d2)</label>
                <input type="text" step="0.01" id="d2" name="d2" th:value="${d2}" required>
            </div>

            <div class="field">
                <label for="d3">Distância para Ancora 3 (d3)</label>
                <input type="text" step="0.01" id="d3" name="d3" th:value="${d3}" required>
            </div>

            <div class="actions">
                <button type="submit" class="btn-primary">Calcular</button>
            </div>
        </form>

        <div th:if="${resultado != null}" style="margin-top: 20px;">
            <h3>Resultado:</h3>
            <p>X: <span th:text="${resultado.posicaoX}"></span></p>
            <p>Y: <span th:text="${resultado.posicaoY}"></span></p>
        </div>

        <div th:if="${erro != null}" style="margin-top: 20px; color: red;">
            <p th:text="${erro}"></p>
        </div>
    </div>
</main>

<div th:replace="fragments/footer :: footerFragment"></div>
</body>
</html>
